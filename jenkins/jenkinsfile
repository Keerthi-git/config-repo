node
{
    stage('loading properties')
    {
         prop=readProperties file: 'config-repo/properties/pipeline.properties'
        echo "load success"
    } 
    
    stage('checkout')
    {
        git url:prop.URL
            branch:prop.BRANCH
            
        echo "checkout success"
     }
     
     stage('mavnen build')
     {
       sh 'mvn clean install'
    }
    
    stage('artifactory upload')
    {
        server= Artifactory.server prop.ARTIFACTORY_ID
        uploadSpec="""{
        "files":[{
            "pattern":"target/*.war",
            "target":"Jenkins-war-snapshot/${artifactId}/${version}.${buildNo}/"
            }]
            }"""
            server.upload(uploadSpec)
     }
    
    stage('tomact deployment')
    {
        sh 'cp target/*.war /home/minduseradmin/apache-tomcat-8.5.35/webapps'
        echo "deploy success"
    } 
     
}
