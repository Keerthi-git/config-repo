node
{
    stage('loading properties')
    {
         prop=readProperties file: 'config-repo/properties/pipeline.properties'
        echo "load success"
    } 
    
    stage('checkout')
    {
        git url:prop.URL
            branch:prop.BRANCH
            
        echo "checkout success"
     }
     
     stage('maven build')
     {
       sh 'mvn clean install'
    }
    
    stage('artifactry upload')
    {
        server= Artifactory.server "artifactory-1"
        uploadSpec="""{
        "files":[{
            "pattern":"target/*.war",
            "target":"Jenkins-war-snapshot/${artifactId}/${version}.${buildNo}/"
            }]
            }"""
            server.upload(uploadSpec)
     }   
}
